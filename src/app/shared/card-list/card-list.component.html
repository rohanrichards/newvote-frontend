

<div fxLayout="column"
	fxLayoutGap="32px"
	*ngIf="items">
	<ng-container *ngIf="items.length === 0">
		<div class="item-card-row"
			fxFlex="100%"
			>
			<div class="empty-card-blank">
			</div>
			<div class="empty-title-container">
				<h2 class="mat-h2">{{ model }}</h2>
				<h4 class="mat-h4">There's no {{ model + 's' | lowercase }} to review at the moment.</h4>
			</div>
		</div>
	</ng-container>
	<div class="item-card-row"
		fxFlex="100%"
		*ngFor="let item of items">
		<mat-card class="item-card"
			[ngClass]="{'soft-deleted': item.softDeleted}"
			routerLink="{{path}}/{{item._id}}">
			<div mat-card-image
				class="image-container"
				[ngStyle]="{'min-height': item.imageUrl ? '200px' : '0px'}"
				[defaultImage]="handleImageUrl(item.imageUrl, true)"
				[lazyLoad]="handleImageUrl(item.imageUrl)">
				<div class="button-panel"
					*ngIf="auth.isModerator() || auth.isCreator(item)">
					<button color="accent"
						mat-icon-button
						(click)="$event.stopPropagation()"
						routerLink='{{path}}/edit/{{item._id}}'>
						<mat-icon aria-label="Edit the content">edit</mat-icon>
					</button>
					<button color="accent"
						*ngIf="item.softDeleted"
						mat-icon-button
						(click)="onRestore(item, $event)">
						<mat-icon aria-label="Restore content">restore</mat-icon>
					</button>
					<button color="accent"
						*ngIf="!item.softDeleted"
						mat-icon-button
						(click)="onSoftDelete(item, $event)">
					<mat-icon aria-label="Remove content">delete</mat-icon>
				</button>
					<button color="warn"
						mat-icon-button
						(click)="onDelete(item, $event)">
						<mat-icon aria-label="Delete content forever">delete_forever</mat-icon>
					</button>
				</div>
			</div>
			<mat-card-content>
				<mat-card-title translate>
					{{item.title}}
					<mat-card-subtitle class="item-subtitle">
						<p *ngIf="showParent">This is a {{model}} for:
							<span *ngFor="let parent of item[parentPropName]; let i = index">
								<a (click)="$event.stopPropagation()"
									routerLink="{{parentPath}}/{{parent._id}}">{{parent.title || parent.name}}</a>
								<span *ngIf="item[parentPropName].length > 1 && i !== item[parentPropName].length - 1">,&nbsp;</span>
							</span>
						</p>
						<p class="status" *ngIf="item && item.status && item.status != null">Suggestion Status: {{item.status === -1 ? 'Rejected' : item.status === 0 ? 'Pending' : 'Approved' }}
						<p [innerHtml]="item.description"></p>
					</mat-card-subtitle>
				</mat-card-title>
				<mat-divider></mat-divider>
			</mat-card-content>
			<mat-card-actions>
				<app-vote-buttons 
					[item]="item"
					(vote)=onVote($event)>
				</app-vote-buttons>
			</mat-card-actions>
			<div *ngIf="showChildren && item[childPath].length > 0"
				class="child-container">
				<span class="mat-card-title">{{childName}}</span>
				<div *ngFor="let child of item[childPath]"
					routerLink="/{{childPath}}/{{child._id}}">
					<div class='mini-proposal'
						[ngClass]="{'soft-deleted': child.softDeleted}"
						>
						<div fxLayout="column"
							class="point-area">
							<div fxLayout="row"
								fxLayoutAlign="start center">
								<div class="mini-proposal-image"
									*ngIf="child.imageUrl"
									[defaultImage]="handleImageUrl(child.imageUrl, true)"
									[lazyLoad]="handleImageUrl(child.imageUrl)">
								</div>
								<div fxLayout="column"
									fxFlex>
									<span class="mat-title"
										[innerHtml]="child.title"></span>
									<app-vote-buttons class="buttons"
										[item]="child"
										(vote)=onChildVote($event)>
									</app-vote-buttons>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</mat-card>
	</div>
</div>



